import { AngleLagCalculator } from "./angle-lag-calculator";


describe('Cross Correlation', () => {



  it('cross correlate', () => {
    let crossCorrelation = new AngleLagCalculator(10, 1000);
    crossCorrelation.add(10, 15)
    crossCorrelation.add(10, 15)
    crossCorrelation.add(10, 15)
    crossCorrelation.add(10, 15)
    crossCorrelation.add(11, 15)
    crossCorrelation.add(12, 15)
    crossCorrelation.add(13, 15)
    crossCorrelation.add(14, 16)
    crossCorrelation.add(15, 17)
    crossCorrelation.add(16, 18)
    crossCorrelation.add(16, 19)
    crossCorrelation.add(16, 20)
    crossCorrelation.add(16, 21)
    crossCorrelation.add(16, 21)
    crossCorrelation.add(16, 21)
    crossCorrelation.add(16, 21)
    crossCorrelation.add(16, 21)
    crossCorrelation.add(15, 21)
    crossCorrelation.add(14, 21)
    crossCorrelation.add(13, 21)
    crossCorrelation.add(12, 20)
    crossCorrelation.add(11, 19)
    crossCorrelation.add(10, 18)
    crossCorrelation.add(10, 17)
    crossCorrelation.add(10, 16)
    crossCorrelation.add(10, 15)
    crossCorrelation.add(10, 15)
    crossCorrelation.add(10, 15)

    expect(crossCorrelation.calculateLagMse()).toBe(-3);
    expect(crossCorrelation.getLagAdjustedAvgDeltaDegrees().toFixed(2)).toBe("-5.00");
  });




  it('cross correlate', () => {
    let crossCorrelation = new AngleLagCalculator(17, 1000);
    crossCorrelation.add(110.40, 72.65)
    crossCorrelation.add(110.60, 73.01)
    crossCorrelation.add(110.80, 73.59)
    crossCorrelation.add(111.01, 75.46)
    crossCorrelation.add(111.20, 76.59)
    crossCorrelation.add(111.40, 76.99)
    crossCorrelation.add(111.60, 77.55)
    crossCorrelation.add(111.80, 78.36)
    crossCorrelation.add(112.00, 93.15)
    crossCorrelation.add(112.20, 94.36)
    crossCorrelation.add(112.40, 93.34)
    crossCorrelation.add(112.60, 92.89)
    crossCorrelation.add(112.80, 91.71)
    crossCorrelation.add(113.00, 91.28)
    crossCorrelation.add(113.16, 91.28)
    crossCorrelation.add(112.97, 89.18)
    crossCorrelation.add(112.38, 91.34)
    crossCorrelation.add(111.39, 91.24)
    crossCorrelation.add(110.00, 92.06)
    crossCorrelation.add(108.21, 92.63)
    crossCorrelation.add(106.33, 93.37)
    crossCorrelation.add(104.42, 96.47)
    crossCorrelation.add(102.77, 98.33)
    crossCorrelation.add(101.50, 98.02)
    crossCorrelation.add(100.37, 95.80)
    crossCorrelation.add(99.23, 94.87)
    crossCorrelation.add(98.17, 94.59)
    crossCorrelation.add(97.06, 97.15)
    crossCorrelation.add(95.98, 99.39)
    crossCorrelation.add(94.86, 98.36)
    crossCorrelation.add(93.62, 99.59)
    crossCorrelation.add(92.30, 98.55)
    crossCorrelation.add(91.04, 97.48)
    crossCorrelation.add(89.82, 92.92)
    crossCorrelation.add(88.49, 93.04)
    crossCorrelation.add(87.08, 91.46)
    crossCorrelation.add(85.74, 90.98)
    crossCorrelation.add(84.45, 88.10)
    crossCorrelation.add(83.23, 87.58)
    crossCorrelation.add(82.07, 84.49)
    crossCorrelation.add(80.80, 79.44)
    crossCorrelation.add(79.57, 82.49)
    crossCorrelation.add(78.22, 81.35)
    crossCorrelation.add(76.89, 79.61)
    crossCorrelation.add(75.59, 79.92)
    crossCorrelation.add(74.16, 79.76)
    crossCorrelation.add(72.72, 80.54)
    crossCorrelation.add(71.28, 82.20)
    crossCorrelation.add(69.78, 70.95)
    crossCorrelation.add(68.31, 71.59)
    crossCorrelation.add(66.88, 69.78)
    crossCorrelation.add(65.41, 69.09)
    crossCorrelation.add(63.95, 67.09)
    crossCorrelation.add(62.56, 67.71)
    crossCorrelation.add(61.20, 66.98)
    crossCorrelation.add(59.72, 65.79)
    crossCorrelation.add(58.28, 68.33)
    crossCorrelation.add(56.84, 66.06)
    crossCorrelation.add(55.30, 65.97)
    crossCorrelation.add(53.74, 65.16)
    crossCorrelation.add(52.33, 66.63)
    crossCorrelation.add(51.32, 64.45)
    crossCorrelation.add(50.71, 63.40)
    crossCorrelation.add(50.50, 50.80)
    crossCorrelation.add(50.70, 49.67)
    crossCorrelation.add(51.29, 49.35)
    crossCorrelation.add(52.28, 48.90)
    crossCorrelation.add(53.67, 49.45)
    crossCorrelation.add(55.46, 48.39)
    crossCorrelation.add(57.49, 48.19)
    crossCorrelation.add(59.40, 49.05)
    crossCorrelation.add(61.31, 48.76)
    crossCorrelation.add(63.21, 43.88)
    crossCorrelation.add(65.19, 43.16)
    crossCorrelation.add(67.26, 44.44)
    crossCorrelation.add(69.33, 44.72)
    crossCorrelation.add(71.43, 45.08)
    crossCorrelation.add(73.54, 46.23)
    crossCorrelation.add(75.71, 46.92)
    crossCorrelation.add(77.82, 45.87)
    crossCorrelation.add(79.83, 46.36)
    crossCorrelation.add(81.84, 46.49)
    crossCorrelation.add(83.81, 47.53)
    crossCorrelation.add(85.72, 48.26)
    crossCorrelation.add(87.60, 49.26)
    crossCorrelation.add(89.48, 49.52)
    crossCorrelation.add(91.36, 49.90)
    crossCorrelation.add(93.27, 54.43)
    crossCorrelation.add(95.32, 55.04)
    crossCorrelation.add(97.41, 57.61)
    crossCorrelation.add(99.44, 58.79)
    crossCorrelation.add(101.53, 58.24)
    crossCorrelation.add(103.57, 57.97)
    crossCorrelation.add(105.58, 58.26)
    crossCorrelation.add(107.59, 58.77)
    crossCorrelation.add(109.63, 61.57)
    crossCorrelation.add(111.53, 63.40)
    crossCorrelation.add(113.28, 63.62)
    crossCorrelation.add(115.02, 66.31)
    crossCorrelation.add(116.75, 68.30)
    crossCorrelation.add(118.47, 68.69)
    crossCorrelation.add(120.24, 71.99)
    crossCorrelation.add(122.02, 84.40)
    crossCorrelation.add(123.92, 86.29)
    crossCorrelation.add(125.80, 87.09)
    crossCorrelation.add(127.64, 84.87)
    crossCorrelation.add(129.60, 83.00)
    crossCorrelation.add(131.51, 85.01)
    crossCorrelation.add(133.45, 84.35)
    crossCorrelation.add(135.42, 96.05)
    crossCorrelation.add(137.52, 96.89)
    crossCorrelation.add(139.59, 97.31)
    crossCorrelation.add(141.68, 97.97)
    crossCorrelation.add(143.72, 99.16)
    crossCorrelation.add(145.76, 99.06)
    crossCorrelation.add(147.84, 101.09)
    crossCorrelation.add(149.85, 103.70)
    crossCorrelation.add(151.94, 104.49)
    crossCorrelation.add(154.01, 102.84)
    crossCorrelation.add(156.13, 102.91)
    crossCorrelation.add(158.23, 105.63)
    crossCorrelation.add(160.33, 106.49)
    crossCorrelation.add(162.50, 106.67)
    crossCorrelation.add(164.60, 106.02)
    crossCorrelation.add(166.68, 115.65)
    crossCorrelation.add(168.83, 114.66)
    crossCorrelation.add(170.94, 115.79)
    crossCorrelation.add(173.12, 118.76)
    crossCorrelation.add(175.27, 122.69)
    crossCorrelation.add(177.37, 124.63)
    crossCorrelation.add(179.39, 128.16)
    crossCorrelation.add(181.41, 134.94)
    crossCorrelation.add(183.41, 135.28)
    crossCorrelation.add(185.52, 136.07)

    expect(crossCorrelation.calculateLagMse()).toBe(-16);
    expect(crossCorrelation.getLagAdjustedAvgDeltaDegrees().toFixed(2)).toBe("14.61");

  });

});


